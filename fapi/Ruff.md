*Установка Ruff**

Установить Ruff можно через pip, poetry или любой другой менеджер пакетов:
```angular2html
pip install ruff
```
Также можно использовать предсобранные бинарные файлы или установить Ruff через Homebrew (для macOS):
```angular2html
brew install ruff
```

**Быстрый старт**
Проверка кода  

Чтобы проанализировать файл или папку, просто вызовите Ruff в командной строке:  
```
ruff path/to/your/code
```
Исправление ошибок

Ruff поддерживает автоматическое исправление некоторых ошибок. Для этого используется флаг --fix:
```
ruff path/to/your/code --fix
```
Сортировка импортов

Если вы хотите автоматически отсортировать импорты, Ruff может работать как частичный заменитель isort:
```
ruff path/to/your/code --fix --select I
```

**Настройка Ruff**
Создание файла конфигурации

Ruff поддерживает несколько форматов конфигурации:  

pyproject.toml  
.ruff.toml  
ruff.json  
.ruff.cfg  

Пример конфигурации в pyproject.toml:
```
[tool.ruff]
line-length = 88  # длина строки
select = ["E", "F", "W", "C"]  # какие категории ошибок проверять
ignore = ["E501"]  # исключить конкретные правила
fixable = ["E", "F"]  # какие категории можно исправлять автоматически
```
Исключения

Можно добавить исключения в конфигурацию:
```
[tool.ruff]
exclude = ["migrations/", "tests/"]
```
Полный пример конфигурации:
```
[tool.ruff]
line-length = 88
select = ["E", "F", "W", "C", "I"]
ignore = ["E501"]
exclude = ["migrations/", "__pycache__/"]
```
**Интеграция с редакторами**
Visual Studio Code (VS Code)  

Установите расширение Python.  
Добавьте ruff в качестве линтера в настройках:
```angular2html
"python.linting.linter": "ruff",
"python.linting.enabled": true,
"python.formatting.provider": "ruff"
```

PyCharm  

Настройте внешний инструмент:  
Preferences → Tools → External Tools → Add.  
Укажите путь к бинарному файлу ruff.  

Используйте ruff как форматер и линтер.


**Полезные команды**

Проверить версию Ruff:
```
ruff --version
```
Сгенерировать базовый конфиг:
```
ruff --init
```
Запустить только линтинг:
```
ruff check path/to/code
```
Исключить правила:
```
ruff path/to/code --ignore F401
```

В параметре select указывается список категорий правил или отдельных проверок, которые Ruff будет применять к вашему коду. Это ключевая настройка, определяющая, какие именно аспекты будут анализироваться.
Основные категории ошибок  

**E (Errors)** — ошибки стиля кода, включающие проверку на соответствие стандарту PEP 8:
Примеры:
**E501:** Строка превышает максимальную длину (например, более 88 символов).
**E302:** Отсутствует две пустые строки перед определением функции или класса.
**E203:** Неверное использование пробелов (например, перед двоеточием).

**F (Pyflakes)** — ошибки, связанные с анализом Python-кода, включающие:
Неиспользуемые переменные.
Использование переменной до её определения.
Импорты, которые не используются.
Примеры:
**F401:** Импорт не используется.
**F821:** Использование переменной, которая не определена.
**F841:** Присвоение значения переменной, но она не используется.

**W (Warnings)** — предупреждения, указывающие на потенциальные проблемы:
Примеры:
**W291:** Лишние пробелы в конце строки.
**W293:** Пустая строка с пробелами.
**W605:** Неправильный синтаксис в строковых литералах (например, использование \ вне допустимых случаев).

**C (Complexity)** — проверка сложности кода, включая когнитивную сложность:
Например:
**C901:** Функция слишком сложная (по числу ветвлений, условий и т.д.).

Пример использования select

Если вы хотите проверять только базовые ошибки и потенциальные проблемы, можно выбрать только категории E и F:
```
[tool.ruff]
select = ["E", "F"]
```
Это отключит проверки на сложность (C) и предупреждения (W), чтобы сконцентрироваться только на критичных моментах.
Как выбрать подходящие категории?

Если вам нужно минимальное соответствие PEP 8, начните с E.
Для выявления реальных ошибок кода, таких как неиспользуемые переменные и проблемы с импортами, добавьте F.
Для более строгого стиля и чистоты кода включите W.
Если вы хотите следить за сложностью функций, включите C.

Комбинация с ignore

Вы можете указать категории в select, а затем исключить конкретные проверки с помощью параметра ignore:
```
[tool.ruff]
select = ["E", "F", "W", "C"]
ignore = ["E501", "W293"]  # отключить проверку длины строки и пустых строк с пробелами
```
Полезные проверки из каждой категории
Категория E (Ошибки стиля)

**E231:** Отсутствие пробела после запятой или двоеточия.
**E701:** Несколько операторов на одной строке.

Категория F (Pyflakes)

**F403:** Использование from module import * (неявный импорт).
**F841:** Присвоение значения переменной, но она не используется.

Категория W (Предупреждения)

**W292:** Отсутствие новой строки в конце файла.
**W503:** Разрыв строки перед бинарным оператором (не рекомендуется).

Категория C (Сложность)

**C901:** Вычисление сложности функций.

Как узнать доступные проверки?

Для получения списка всех проверок, поддерживаемых Ruff, можно использовать следующую команду:
```
ruff --help
```
Или более конкретно — вывести поддерживаемые правила:
```
ruff rules
```
Эта команда покажет все правила, разделённые по категориям, включая их коды и описание.

